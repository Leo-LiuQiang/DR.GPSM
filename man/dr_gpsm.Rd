% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dr_gpsm.R
\name{dr_gpsm}
\alias{dr_gpsm}
\title{Doubly-robust GPS matching estimator}
\usage{
dr_gpsm(
  data,
  treatment,
  treatment_ref = NULL,
  covariate,
  outcome,
  gps_model = c("logit", "gbm", "gam"),
  outcome_model = c("none", "lm", "rf", "gbm", "gam"),
  folds = 2,
  nboot = 500,
  hist = FALSE,
  hist_path = NULL,
  gps_params = NULL,
  outcome_params = NULL,
  match_on = c("gps", "covariates"),
  cov_distance = c("mahalanobis", "euclidean"),
  standardize = FALSE,
  match_ratio = 1L
)
}
\arguments{
\item{data}{Data frame with treatment, covariates, and outcome variables}

\item{treatment}{Column index of the treatment variable}

\item{treatment_ref}{Reference treatment level (default = first level)}

\item{covariate}{Numeric vector of covariate column indices}

\item{outcome}{Column index of the outcome variable}

\item{gps_model}{Choice of GPS model: 'logit', 'gbm', or 'gam'}

\item{outcome_model}{Choice of outcome model: 'none','lm','rf','gbm','gam'}

\item{folds}{Number of folds for cross-fitting (default = 2)}

\item{nboot}{Number of bootstrap replications (default = 500)}

\item{hist}{Logical; TRUE to save GPS histogram}

\item{hist_path}{File path (pdf/png/jpg) to save histogram if hist=TRUE}

\item{gps_params}{Optional named list of hyperparameters per GPS model}

\item{outcome_params}{Optional named list of hyperparameters per outcome model
For example: list(
lm    = list(),  # (unused; here for symmetry)
rf    = list(ntree = 500, mtry = NULL, nodesize = 1),
gbm   = list(n.trees=3000, interaction.depth=3, shrinkage=0.01,
cv.folds=0, n.minobsinnode=10, n.cores=1, verbose=FALSE),
gam   = list(df_max = 6, family = NULL, method = "REML")
)}

\item{match_on}{'gps' (default) or 'covariates'}

\item{cov_distance}{For covariate matching: 'euclidean' or 'mahalanobis' (default 'mahalanobis')}

\item{standardize}{If TRUE, center/scale covariate features before matching (default FALSE)}

\item{match_ratio}{Integer â‰¥ 1; number of matches per unit per target group (default 1)}
}
\value{
A list with components:
\describe{
\item{estimate}{Named numeric vector of doubly-robust ATE estimates for each contrast}
\item{ci_lower}{Named numeric vector of lower 95\% confidence bounds}
\item{ci_upper}{Named numeric vector of upper 95\% confidence bounds}
}
}
\description{
Doubly-robust GPS matching estimator
}
